---
import { resumeData } from "../data/resume";
import TacticalResumeCard from "./TacticalResumeCard";
import { CommandPaletteProvider } from "./CommandPalette";
import ResumeHeader from "./ResumeHeader";
import ConsoleArt from "./ConsoleArt";
import "@components/TacticalResume.css";

interface Props {
  pdfUrl?: string;
}

const { pdfUrl } = Astro.props;
---

<!-- Initialize browser dev console easter egg -->
<ConsoleArt client:load />

<CommandPaletteProvider client:load>
<div class="tactical-resume">
  <!-- Header with console mode easter egg (Cmd+Click on name) -->
  <ResumeHeader
    client:load
    name={resumeData.name}
    title={resumeData.title}
    location={resumeData.location}
    oneLiner={resumeData.oneLiner}
    locationLine={resumeData.locationLine}
    contact={resumeData.contact}
  />

  <!-- Experience Section - Operational History -->
  <section class="experience-section">
    <h2 class="section-header">OPERATIONAL HISTORY</h2>
    {resumeData.experience.map((exp, index) => (
      <TacticalResumeCard experience={exp} index={index} client:visible />
    ))}
  </section>

  <!-- Education Section - Training -->
  <section class="education-section">
    <h2 class="section-header">TRAINING</h2>
    {resumeData.education.map((edu) => (
      <div class="compact-card">
        <div class="compact-header">
          <span class="compact-title">{edu.institution}</span>
        </div>
        <div class="compact-meta">
          {edu.degree} in {edu.field} | {edu.year} | {edu.location}
        </div>
      </div>
    ))}
  </section>

  <!-- Volunteer Section - Allied Operations -->
  <section class="volunteer-section">
    <h2 class="section-header">ALLIED OPERATIONS</h2>
    {resumeData.volunteer.map((vol) => (
      <div class="compact-card" data-featured={vol.featured ? "true" : "false"}>
        <div class="compact-header">
          <span class="compact-title">{vol.organization}</span>
          {vol.badge && <span class="compact-badge">{vol.badge}</span>}
        </div>
        <div class="compact-meta">
          {vol.role} | {vol.dates}
        </div>
        <div class="compact-description">{vol.description}</div>
      </div>
    ))}
  </section>

  <!-- Download PDF Section -->
  {pdfUrl && (
    <div class="download-section">
      <a href={pdfUrl} class="download-btn" download>
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
          <polyline points="7 10 12 15 17 10"></polyline>
          <line x1="12" y1="15" x2="12" y2="3"></line>
        </svg>
        DOWNLOAD_PDF
      </a>
    </div>
  )}

</div>
</CommandPaletteProvider>
