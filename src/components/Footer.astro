---
import Hr from "./Hr.astro";
import Socials from "./Socials.astro";

const currentYear = new Date().getFullYear();

export interface Props {
  noMarginTop?: boolean;
}

const { noMarginTop = false } = Astro.props;
---

<footer class={`professional-footer ${noMarginTop ? "" : "mt-auto"}`}>
  <!-- Default / Docs footer -->
  <div class="footer-container footer-default">
    <div class="footer-content">
      <div class="footer-section brand-section">
        <div class="brand">
          <h3 class="brand-name">ARACH.IO</h3>
        </div>
      </div>

      <div class="footer-section links-section">
        <h4 class="section-title">Connect</h4>
        <div class="connect-inline">
          <Socials centered={false} />
        </div>
      </div>

      <div class="footer-section nav-section">
        <h4 class="section-title">Navigate</h4>
        <nav class="footer-nav">
          <a href="/posts/" class="footer-link">Blog</a>
          <a href="/books/" class="footer-link">Books</a>
          <a href="/about/" class="footer-link">About</a>
          <a href="/resume/" class="footer-link">Resume</a>
        </nav>
      </div>

      <div class="footer-section legal-section">
        <h4 class="section-title">Misc</h4>
        <nav class="footer-nav">
          <a href="/rss.xml" class="footer-link">RSS</a>
          <a href="/privacy/" class="footer-link">Privacy</a>
        </nav>
      </div>
    </div>
  </div>

  <!-- Terminal footer -->
  <div class="footer-container footer-terminal">
    <div class="terminal-footer-inner">
      <span class="terminal-footer-prompt">arach@io:~$</span>
      <span class="terminal-footer-text">exit 0</span>
      <span class="terminal-footer-meta">&copy; {currentYear}</span>
    </div>
  </div>

  <!-- Industrial footer -->
  <div class="footer-container footer-industrial">
    <div class="industrial-footer-inner">
      <span class="industrial-status">SYSTEM: NOMINAL</span>
      <span class="industrial-sep">&bull;</span>
      <span class="industrial-status">NETWORK: ONLINE</span>
      <span class="industrial-sep">&bull;</span>
      <span class="industrial-status">&copy; {currentYear} ARACH.IO</span>
    </div>
  </div>
</footer>

<style>
  :global(body) {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    margin: 0;
  }

  main {
    flex: 1;
  }

  .professional-footer {
    @apply w-full;
    background: rgb(var(--color-fill));
    border-top: 1px solid rgb(var(--color-border) / 0.1);
    margin-top: 60px;
  }
  
  .footer-container {
    @apply mx-auto max-w-6xl px-4;
  }
  
  .footer-content {
    @apply grid gap-8 py-12;
    grid-template-columns: 1fr;
  }
  
  @media (min-width: 640px) {
    .footer-content {
      grid-template-columns: 1.5fr 1fr 1fr 1fr;
      gap: 4rem;
    }
  }
  
  .footer-section {
    @apply flex flex-col;
  }
  
  .brand-section {
    @apply space-y-3;
  }
  
  .brand-name {
    @apply text-lg font-bold tracking-wider;
    color: rgb(var(--color-text-base));
    font-family: 'Space Mono', monospace;
    letter-spacing: 0.1em;
  }
  
  .tagline {
    @apply text-sm;
    color: rgb(var(--color-text-base) / 0.6);
    font-weight: 450;
  }
  
  .section-title {
    @apply mb-3 text-xs font-semibold uppercase tracking-wider;
    color: rgb(var(--color-text-base) / 0.5);
    letter-spacing: 0.1em;
  }
  
  .footer-nav {
    @apply flex flex-col space-y-2;
  }
  
  .footer-link {
    @apply text-sm transition-colors;
    color: rgb(var(--color-text-base) / 0.7);
    font-weight: 450;
  }
  
  .footer-link:hover {
    color: rgb(var(--color-accent));
  }
  
  /* Adjust Socials styling */
  .connect-inline :global(.social-icons) {
    @apply flex-row items-start gap-3;
  }
  
  .links-section :global(.link-button) {
    @apply p-0 my-0;
  }
  
  .links-section :global(.link-button:hover) {
    transform: translateY(-2px);
  }
  
  .footer-bottom {
    @apply flex flex-col items-center justify-between py-6 text-xs sm:flex-row;
    color: rgb(var(--color-text-base) / 0.5);
  }
  
  .copyright {
    @apply mb-2 sm:mb-0;
  }
  
  .location {
    font-weight: 450;
  }
  
  /* Mobile responsiveness */
  @media (max-width: 639px) {
    .footer-content {
      @apply text-center;
    }

    .brand-section,
    .section-title {
      @apply text-center;
    }

    .footer-nav {
      @apply items-center;
    }

    .connect-inline :global(.social-icons) {
      @apply flex-row items-center justify-center gap-3;
    }
  }

  /* === Template-specific footer visibility === */
  .footer-terminal,
  .footer-industrial {
    display: none;
  }

  :global([data-template="terminal"]) .footer-default {
    display: none;
  }
  :global([data-template="terminal"]) .footer-terminal {
    display: block;
    padding: 1.5rem 1rem;
  }

  :global([data-template="industrial"]) .footer-default {
    display: none;
  }
  :global([data-template="industrial"]) .footer-industrial {
    display: block;
    padding: 1.25rem 1rem;
  }

  /* Terminal footer */
  .terminal-footer-inner {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-family: "Berkeley Mono", "Fira Code", monospace;
    font-size: 0.8125rem;
  }

  .terminal-footer-prompt {
    opacity: 0.5;
  }

  .terminal-footer-text {
    opacity: 0.7;
  }

  .terminal-footer-meta {
    margin-left: auto;
    opacity: 0.3;
    font-size: 0.75rem;
  }

  /* Industrial footer */
  .industrial-footer-inner {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    font-family: "JetBrains Mono", "Fira Code", monospace;
    font-size: 0.625rem;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    opacity: 0.4;
  }

  .industrial-sep {
    opacity: 0.3;
  }
</style>
